{% extends "base.html" %}

{% load jsonify from common_tags %}
{% load thumbnail %}

{% block js-includes %}
    {% include "javascript-includes.html" with jquery_form="yes" jquery_ui="yes" bootstrap_carousel="yes" map="yes" %}
{% endblock %}

{% block page-specific-includes %}
    {% include "static-local-include.html" with type="css" path="css/index.css" %}

    {# For the bootstrap carousel #}
    {% include "static-local-include.html" with type="css" path="css/bootstrap.css" %}

{% endblock %}

{# Empty the nav area #}
{% block nav %}{% endblock %}

{% block content %}

<div id="intro">

    <div id="myCarousel" class="carousel slide">
        <!-- Carousel items -->
        <div class="carousel-inner">
            {% for image in images %}
                <div
                    {% if forloop.first %}
                        class="item active"
                    {% else %}
                        class="item"
                    {% endif %}
                >
                    <span class="thumb_front_wrapper">
                    <a href="{% url 'image_detail' image.id %}">
                        <img class="thumb_small"
                             style="margin: 0 auto; vertical-align: middle"
                             title="From: {{ image.source.name }}"
                             src="{% thumbnail image.original_file 450x450 %}"/>
                    </a>
                    </span>
                </div>
            {% endfor %}
        </div>
    </div>

    <h1>CoralNet <span class="beta">BETA</span></h1>
    <h2>A Web solution for coral reef analysis</h2>

    <p>Upload coral reef images, organize and annotate images, and view annotation statistics.</p>

    <a class="sign-in" href="{% url 'auth_login' %}">Sign In</a>
    <a class="register" href="{% url 'registration_register' %}">Register</a>
    <a class="about" href="{% url 'about' %}">What is CoralNet?</a>


</div><!-- /intro-->

<br>
<br>

{% include 'lib/map.html' %}

<br>

<div id="site-stats">
    <p>Visit data sources from around the world by clicking on public sources
        to explore images, labels, and coverage statistics.</p>
    <p>There are currently {{ total_sources }} sources on CoralNet, with a combined total of {{ total_images }} images and {{ total_annotations }} point annotations.
    </p>
</div>

<script type="text/javascript">
    CNMap.init({
        'mapSources': {{ map_sources|jsonify }}
    });
    $(document).ready(function(){
        $('.carousel').carousel({ interval:3500 });
    });
</script>

{% endblock %}

{% block footer_extra %}
    <p>Powered by <a href="https://www.djangoproject.com/" target="_blank">Django</a></p>
    <p>Site theme adapted from <a href="http://django-userena.org/" target="_blank">Django-Userena</a></p>
{% endblock %}
