{% load static from staticfiles %}
{% load googleanalytics_tag %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <title>{% block title %}CoralNet{% endblock %}</title>

    <meta charset="utf-8" />
    <meta name="description" content="Coral Research in the 21st century" />
    <meta name="keywords" content="corals, research, annotation, UCSD, University of California San Diego, open source" />
    <meta name="author" content="UCSD CVCE" />

    {% comment %}
    Favicon. The order of declarations matters. Some explanation of
    how it works at: http://stackoverflow.com/questions/2268204/

    The formats and order are a partial list generated by
    http://realfavicongenerator.net/ in 2016.11.
    (The full list included several declarations specific to particular mobile
    devices, mainly used to optimize display on those devices' app icons.)
    {% endcomment %}
    <link rel="icon" type="image/png"
          href="{% static 'img/favicon-32x32.png' %}" sizes="32x32">
    <link rel="icon" type="image/png"
          href="{% static 'img/favicon-16x16.png' %}" sizes="16x16">
    <link rel="shortcut icon"
          href="{% static 'img/favicon.ico' %}">

    {% include "static-local-include.html" with type="css" path="css/master.css" %}

    {% comment %}
    Multi-purpose CSS includes (CSS used on multiple pages) can go here.
    {% endcomment %}
    {% block css-includes %}{% endblock %}

    {% comment %}
    General-purpose JS includes can go here.
    {% endcomment %}
    {% block js-includes %}
        {% include "javascript-includes.html" %}
    {% endblock %}

    {% comment %}
    Page-specific CSS and JS includes can go here.
    {{ form.media }} for example.
    {% endcomment %}
    {% block page-specific-includes %}{% endblock %}

    {% comment %}
    Page-specific CSS code can go here.
    (Though it's often better to include an external .css instead, especially if it's more than a few CSS rules.).
    {% endcomment %}
    {% block css-code %}{% endblock %}

    {% comment %}
    Page-header JavaScript functions can go here.
    (Though it's often better to include an external .js instead).
    {% endcomment %}
    {% block javascript-functions %}
    {% endblock %}

    {% googleanalyticsjs %}
    
  </head>
  <body>
    <div id="top">
      {% include "maintenance_notice.html" %}
      {% if messages %}
      <ul class="messages">
        {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message|linebreaksbr }}</li>
        {% endfor %}
      </ul>
      {% endif %}
    </div>
 
    <div id="container">

      <div id="header">

        {% block nav %}
        <div class="nav_container" id="nav_main_container">
          <ul class="nav nav_left" id="nav_main">
            <li><a href="{% url 'index' %}"><span>Home</span></a></li>
            <li><a href="{% url 'label_list' %}"><span>Labels</span></a></li>
          </ul>
          <ul class="nav nav_right" id="nav_user">
            {% if user.is_authenticated %}

              {% with num_invites_received=user.invites_received.count %}
                {% if num_invites_received > 0 %}
                <li class="button_prominent"><a href="{% url 'invites_manage' %}"><span>Invites ({{ num_invites_received }})</span></a></li>
                {% else %}
                <li><a href="{% url 'invites_manage' %}"><span>Invites</span></a></li>
                {% endif %}
              {% endwith %}

              {% if user.is_superuser %}
	              <li><a href="{% url 'admin_tools' %}">
                  <span>Admin Tools</span>
                </a></li>
              {% endif %}

              <li><a href="{% url 'profile_detail' user.pk %}"><span>Account ({{ user.username }})</span></a></li>
              <li><a href="{% url 'logout' %}"><span>Sign out</span></a></li>

            {% else %}

              <li><a href="{% url 'login' %}"><span>Sign in</span></a></li>
              <li><a href="{% url 'django_registration_register' %}"><span>Register</span></a></li>

            {% endif %}
          </ul>
        </div>
        {% endblock %}{# /nav #}

      </div><!-- /header -->

      <div id="content-container">
        {% block content %}{% endblock %}
      </div><!-- /content-container-->

      <div id="footer">
        <div class="nav_container" id="nav_footer_container">
          <ul class="nav nav_left" id="nav_footer">
            {% comment %}
            These links are ordered roughly from 'How do I use the site?'
            to 'I'm curious about the site in general.'
            {% endcomment %}
            <li><a href="{% url 'pages:help' %}"><span>Help</span></a></li>
            <li><a href="{{ forum_link }}"><span>Forum</span></a></li>
            <li><a href="{% url 'blog:entry_list' %}"><span>Blog</span></a></li>
            <li><a href="{% url 'about' %}"><span>About</span></a></li>
            <li><a href="https://github.com/beijbom/coralnet"><span>GitHub</span></a></li>
          </ul>
        </div>
        {% block footer_extra %}{% endblock %}
      </div><!-- /footer -->
    
    </div><!-- /container -->
  </body>
</html>
