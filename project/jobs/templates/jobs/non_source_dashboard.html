{% extends 'base.html' %}

{% block title %}Non-source Jobs | CoralNet{% endblock %}


{% block css-code %}
<style>
tr.pending {
  background-color: #bbe;
}
tr.in_progress {
  background-color: #eeb;
}
tr.success {
  background-color: #beb;
}
tr.failure {
  background-color: #ebb;
}
</style>
{% endblock %}


{% block content %}

<h1>Non-source Jobs</h1>

{% if job_table %}

  <table class="generic" id="jobs-table">
    <thead>
      <tr>
        <th title="Job ID">Job ID</th>
        <th title="Job type">Type</th>
        <th title="API job unit ID, if applicable">API job unit</th>
        <th title="Progress status">Status</th>
        <th title="Error message or other note about the result">Detail</th>
        <th title="Time the job's status was last updated">Last updated</th>
      </tr>
    </thead>
    <tbody>
      {% for table_entry in job_table %}
        <tr class="{{ table_entry.status_tag }}">
          <td>{{ table_entry.id }}</td>
          <td>{{ table_entry.job_type }}</td>
          <td>
            {% if table_entry.api_job_unit_id %}
              <a href="{% url 'api_management:job_detail' table_entry.api_job_id %}">
                {{ table_entry.api_job_unit_id }}
              </a>
            {% endif %}
          </td>
          <td>{{ table_entry.status }}</td>
          <td>{{ table_entry.result_message }}</td>
          <td>{{ table_entry.modify_date }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  {% include 'pagination_links.html' with page_results=page_results %}

{% else %}

  <p>(No jobs found)</p>

{% endif %}

<p>Job records are cleaned up after {{ job_max_days }} days.</p>

{% endblock %}
