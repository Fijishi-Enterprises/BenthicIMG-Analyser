{% extends "base.html" %}

{% load jsonify from common_tags %}

{% block js-includes %}
  {% include "javascript-includes.html" with map="yes" %}
{% endblock %}

{% block content %}

  <h2>Your Sources</h2>
  <table class="detail_table">
    <tr>
      <th>Source</th>
      <th>Your Role</th>
    </tr>
      {% for source in your_sources %}
        <tr>
          <td><a href="{% url 'source_main' source.id %}">
            {{ source.name }}</a></td>
          <td>{{ source.your_role }}</td>
        </tr>
      {% endfor %}
  </table>
  <br />
  <p><a href="{% url 'source_new' %}">+ Create a new Source</a></p>

  <hr />
  <h2>Other Public Sources</h2>

  {% include 'lib/map.html' %}

  <ul class="object_list">
    {% for source in other_public_sources %}
      <li><a href="{% url 'source_main' source.id %}">
        {{ source.name }}</a></li>
    {% endfor %}
  </ul>

  <script type="text/javascript">
      CNMap.init({
          'mapSources': {{ map_sources|jsonify }}
      });
  </script>

{% endblock %}
