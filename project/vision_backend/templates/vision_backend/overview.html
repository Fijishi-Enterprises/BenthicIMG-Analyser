{% extends "base.html" %}

{% block javascript-functions %}

<script>
var chart,
  binnedData,
  rawData = [3.5, 3, 3.2, 3.1, 3.6, 3.9, 3.4, 3.4, 2.9, 3.1, 3.7, 3.4, 3, 3, 4, 4.4, 3.9, 3.5, 3.8, 3.8, 3.4, 3.7, 3.6, 3.3, 3.4, 3, 3.4, 3.5, 3.4, 3.2, 3.1, 3.4, 4.1, 4.2, 3.1, 3.2, 3.5, 3.6, 3, 3.4, 3.5, 2.3, 3.2, 3.5, 3.8, 3, 3.8, 3.2, 3.7, 3.3, 3.2, 3.2, 3.1, 2.3, 2.8, 2.8, 3.3, 2.4, 2.9, 2.7, 2, 3, 2.2, 2.9, 2.9, 3.1, 3, 2.7, 2.2, 2.5, 3.2, 2.8, 2.5, 2.8, 2.9, 3, 2.8, 3, 2.9, 2.6, 2.4, 2.4, 2.7, 2.7, 3, 3.4, 3.1, 2.3, 3, 2.5, 2.6, 3, 2.6, 2.3, 2.7, 3, 2.9, 2.9, 2.5, 2.8, 3.3, 2.7, 3, 2.9, 3, 3, 2.5, 2.9, 2.5, 3.6, 3.2, 2.7, 3, 2.5, 2.8, 3.2, 3, 3.8, 2.6, 2.2, 3.2, 2.8, 2.8, 2.7, 3.3, 3.2, 2.8, 3, 2.8, 3, 2.8, 3.8, 2.8, 2.8, 2.6, 3, 3.4, 3.1, 3, 3.1, 3.1, 3.1, 2.7, 3.2, 3.3, 3, 2.5, 3, 3.4, 3];
binnedData = binData(rawData);

$(document).ready(function() {
    var chart1 = new Highcharts.Chart({
        chart: {
          type: 'column',
          renderTo: 'acchist',
          margin: [60, 10, 40, 40],
        },
        title: {
          text: 'Symmetrical Distribution',
          x: 25
        },
        subtitle: {
          text: 'Fisher\'s Iris Data: Sepal Width',
          x: 25
        },
        legend: {
          enabled: false
        },
        credits: {
          enabled: false
        },
        exporting: {
          enabled: false
        },
        tooltip: {},
        plotOptions: {
          series: {
            pointPadding: 0,
            groupPadding: 0,
            borderWidth: 0.5,
            borderColor: 'rgba(255,255,255,0.5)',
            color: Highcharts.getOptions().colors[1]
          }
        },
        xAxis: {
          title: {
            text: 'Sepal Width (cm)'
          }
        },
        yAxis: {
          title: {
            text: ''
          }
        }
        series: [{
            data: [1,2,3, 4, 5],
        }];
    });
});
</script>

{% endblock %}


{% block content %}
<div id="acchist", style="width:60%; height:400px;margin-left: auto;
        margin-right: auto"></div>

<p>There are {{img_stats.nimgs}} images on the site out of which {{img_stats.nextracted}} ({{img_stats.fextracted}}%) have features, {{img_stats.nconfirmed}} ({{img_stats.fconfirmed}}%) are confirmed and {{img_stats.nclassified}} ({{img_stats.fclassified}}%) classified. {{img_stats.nnaked}} are neither classified nor confirmed ({{img_stats.fnaked}}%).</p>

<p>There are {{clf_stats.nclassifiers}} trained classifieres out of which {{clf_stats.nvalidclassifiers}} are valid. This means there are on average {{clf_stats.valid_ratio}} valid classifiers per each of the {{clf_stats.nsources}} sources. </p>

<p> There are currently {{spacer_queue}} jobs in the Spacer queue. </p>
<table class="detail_table_popup">
    <tr>
        <th>id</th>
        <th>name</th>
        <th># ver rbts</th>
        <th># rbts</th>
        <th>need new</th>
        <th># imgs</th>
        <th># ver.</th>
        <th># in curr.</th>
        <th># need feats</th>
        <th># uncl.</th>
    </tr>
    {% for source in laundry_list %}
        {% if source.need_attention %}
            <tr style="background-color:red;color:#000">
        {% else %}
            {% if source.has_robot %}
                <tr style="background-color:green;color:#000">
            {% else %}
                <tr style="background-color:gray;color:#000">
            {% endif %}
        {% endif %}
        <td> <a href="{% url 'source_main' source.id %}">{{source.id}}</a></td>
        <td> {{source.name_short}} </td>
        <td> {{source.nbr_valid_robots}} </td>
        <td> {{source.nbr_robots}} </td>
        <td> {{source.need_robot}} </td>
        <td> {{source.nbr_total_images}} </td>
        <td> {{source.nbr_human_annotated_images}} </td>
        <td> {{source.nbr_in_current_model}} </td>
        <td> {{source.nbr_images_needs_features}} </td>
        <td> {{source.nbr_unclassified_images}} </td>
        </tr>
    {% endfor %}
</table>

{% endblock %}